######################################
# Esnifando con Ettercap y Wireshark #
######################################

Estos programas se usan para lo siguiente:

 - Ettercap: principalmente lo he usado para el envenenamiento ARP (ARP poisoning o spoofing) de la máquina objetivo (en este caso el móvil), para realizar la técnica de MITM, que 
             consiste en establecer la puerta de enlace predeterminada del equipo objetivo (el móvil) a la dirección IP del equipo atacante. De esta manera nuestro equipo atacante estará 
             situado entre el router y el objetivo, logrando así "escuchar" todo el tráfico de red que genera el objetivo.
             
 - Wireshark: lo uso para "ver" el tráfico que genera el objetivo.



1) Abrimos ettercap:

  >ettercap -C

2) Una vez abierta, le damos a "Sniff -> Unified sniffing", y tendremos que introducir la interfaz que queramos esnifar, en mi caso "wlan0" (Ya que el móvil se conecta por wifi).

3) El siguente paso es escanear la red en busca de hosts, "Hosts -> Scan for hosts". Al pulsar comenzará a escanear y en el recuadro de abajo nos aparecerá cuantos host encontró.

4) Para ver las IPs de los hosts encontrados vamos a "Hosts -> hosts list", nos quedamos con la IP de nuestro objetivo y pasamos al siguiente paso, "Targets -> Select TARGET(s)".
   Aquí debemos poner como "target1" nuestra puerta de enlace predeterminada, y como "target 2" el objetivo:

		Target 1:  ///<puerta_de_enlace_predeterminada>
		Target 2:  ///<ip_del_obejtivo>

5) Ahora hacemos "Start -> Start sniffing", y despues, procedemos al envenenamiento ARP. Para ello, "Mitm -> Arp poisoning". Nos pedirá unos parámetros, yo he puesto "oneway", que fuerza
   a envenenar solo desde Target1 a Target2, útil para envenenar solo el objetivo y no el router.

6) Si ejecutamos antes de realizar todo esto "arp -a" en el equipo objetivo, vemos que la puerta de enlace tiene una MAC asociada, despues de hacer en envenenamiento, esta MAC es la del 
   equipo atacante.

7) Arrancamos Wireshark:

   >wireshark

8) Vamos a "Capture -> Options", aquí seleccionaremos la interfaz a esniffar, que debe ser la misma que usamos en ettercap, dejamos marcada la casilla "Capture packets in promiscuous 
   mode" y clicamos en start.

9) IMPORTANTE: Una vez terminemos de esnifar, no se nos puede olvidar quitar el envenenamiento: "ARP Mitm -> Stop mitm attack(s)", ya que si no, al apagar el equipo atacante el objetivo 
               se queda sin conexión, al hacer el atacante de puerta de enlace. Por último, "Start -> Stop sniffing".
